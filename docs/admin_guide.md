# Руководство системного администратора

## Развёртывание инфраструктуры
Для развёртывания используются Linux VM с доступом по SSH.

Минимальный порядок:
1. Создание VM
2. Настройка сети и firewall
3. Установка необходимых пакетов
4. Развёртывание сервисов

---

## Центр сертификации (CA)
CA используется для выпуска и подписи сертификатов VPN.

Рекомендуется:
- хранить ключи CA отдельно
- регулярно делать резервные копии

При компрометации ключей требуется перевыпуск сертификатов.

---

## VPN-сервер
VPN-сервер использует OpenVPN.

Задачи администратора:
- добавление пользователей
- отзыв сертификатов
- контроль логов

---

## Резервное копирование
Используется BorgBackup.

Резервируются:
- PKI (CA)
- конфигурации
- скрипты

Бэкапы запускаются автоматически через systemd timer.

---

## Восстановление из бэкапа
1. Установить Borg
2. Подключить хранилище
3. Восстановить нужные данные
4. Перезапустить сервисы

---

## Firewall
Открытые порты:
- 22/tcp — SSH
- 1194/udp — OpenVPN
- 9090/tcp — Prometheus
- 3000/tcp — Grafana
- 3100/tcp — Loki

---

## Мониторинг
Используется Prometheus и Grafana.

Контролируются:
- доступность сервисов
- ошибки бэкапов
- загрузка ресурсов

